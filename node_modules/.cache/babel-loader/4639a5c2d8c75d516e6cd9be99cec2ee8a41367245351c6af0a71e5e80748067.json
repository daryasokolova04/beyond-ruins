{"ast":null,"code":"const data = [{\n  id: \"1\",\n  name: \"ivan\",\n  surname: \"ivanov\",\n  sex: \"Мужской\",\n  email: \"ivan.ivanov@mail.ru\",\n  password: \"123\",\n  license: true,\n  posts: [{\n    id: 123,\n    title: \"Lorem ipsum dolor\",\n    text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dignissim enim sit amet venenatis. Et ligula ullamcorper malesuada proin libero nunc consequat interdum. Mauris vitae ultricies leo integer malesuada nunc vel risus. Proin nibh nisl condimentum id venenatis a condimentum vitae.\"\n  }]\n}, {\n  id: \"123\",\n  name: \"kate\",\n  surname: \"sidorova\",\n  sex: \"Женский\",\n  email: \"kate@kate.com\",\n  password: \"456\",\n  license: true,\n  posts: [{\n    id: 456,\n    title: \"sed do eiusmod\",\n    text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \"\n  }, {\n    id: 678,\n    title: \"Dignissim enim \",\n    text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dignissim enim sit amet venenatis. Et ligula ullamcorper malesuada proin libero nunc consequat interdum.\"\n  }]\n}];\nif (!localStorage.getItem(\"data\")) {\n  localStorage.setItem(\"data\", JSON.stringify(data));\n}\nconst fetchAll = () => new Promise(resolve => {\n  window.setTimeout(function () {\n    resolve(JSON.parse(localStorage.getItem(\"data\")));\n  }, 0);\n});\nconst getById = id => new Promise(resolve => {\n  window.setTimeout(function () {\n    resolve(JSON.parse(localStorage.getItem(\"data\")).find(user => user.id === id));\n  }, 1000);\n});\nconst clearLocalStorage = () => {\n  localStorage.clear();\n};\nconst add = user => new Promise(resolve => {\n  const data = JSON.parse(localStorage.getItem(\"data\"));\n  data.push(user);\n  localStorage.setItem(\"data\", JSON.stringify(data));\n  resolve(data => console.log(data));\n});\nconst addPost = (userId, post) => new Promise(resolve => {\n  const data = JSON.parse(localStorage.getItem(\"data\"));\n  const user = getById(userId).then(user => {\n    user.posts.push(post);\n  }).then(user => console.log(user));\n  update(userId, user).then(() => localStorage.setItem(\"data\", JSON.stringify(data)));\n  resolve(data => console.log(data));\n});\nconst update = (id, user) => new Promise(resolve => {\n  const data = JSON.parse(localStorage.getItem(\"data\"));\n  const userIndex = data.findIndex(u => u.id === id);\n  data[userIndex] = {\n    ...data[userIndex],\n    ...user\n  };\n  localStorage.setItem(\"users\", JSON.stringify(data));\n  resolve(data[userIndex]);\n});\nexport default {\n  fetchAll,\n  getById,\n  update,\n  add,\n  clearLocalStorage,\n  addPost\n};","map":{"version":3,"names":["data","id","name","surname","sex","email","password","license","posts","title","text","localStorage","getItem","setItem","JSON","stringify","fetchAll","Promise","resolve","window","setTimeout","parse","getById","find","user","clearLocalStorage","clear","add","push","console","log","addPost","userId","post","then","update","userIndex","findIndex","u"],"sources":["/Users/darya/project/src/api/fake.api/users.api.js"],"sourcesContent":["const data = [\n  {\n    id: \"1\",\n    name: \"ivan\",\n    surname: \"ivanov\",\n    sex: \"Мужской\",\n    email: \"ivan.ivanov@mail.ru\",\n    password: \"123\",\n    license: true,\n    posts: [\n      {\n        id: 123,\n        title: \"Lorem ipsum dolor\",\n        text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dignissim enim sit amet venenatis. Et ligula ullamcorper malesuada proin libero nunc consequat interdum. Mauris vitae ultricies leo integer malesuada nunc vel risus. Proin nibh nisl condimentum id venenatis a condimentum vitae.\",\n      },\n    ],\n  },\n  {\n    id: \"123\",\n    name: \"kate\",\n    surname: \"sidorova\",\n    sex: \"Женский\",\n    email: \"kate@kate.com\",\n    password: \"456\",\n    license: true,\n    posts: [\n      {\n        id: 456,\n        title: \"sed do eiusmod\",\n        text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \",\n      },\n      {\n        id: 678,\n        title: \"Dignissim enim \",\n        text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Dignissim enim sit amet venenatis. Et ligula ullamcorper malesuada proin libero nunc consequat interdum.\",\n      },\n    ],\n  },\n];\n\nif (!localStorage.getItem(\"data\")) {\n  localStorage.setItem(\"data\", JSON.stringify(data));\n}\n\nconst fetchAll = () =>\n  new Promise((resolve) => {\n    window.setTimeout(function () {\n      resolve(JSON.parse(localStorage.getItem(\"data\")));\n    }, 0);\n  });\n\nconst getById = (id) =>\n  new Promise((resolve) => {\n    window.setTimeout(function () {\n      resolve(\n        JSON.parse(localStorage.getItem(\"data\")).find((user) => user.id === id)\n      );\n    }, 1000);\n  });\n\nconst clearLocalStorage = () => {\n  localStorage.clear();\n};\n\nconst add = (user) =>\n  new Promise((resolve) => {\n    const data = JSON.parse(localStorage.getItem(\"data\"));\n    data.push(user);\n    localStorage.setItem(\"data\", JSON.stringify(data));\n    resolve((data) => console.log(data));\n  });\n\nconst addPost = (userId, post) =>\n  new Promise((resolve) => {\n    const data = JSON.parse(localStorage.getItem(\"data\"));\n    const user = getById(userId)\n      .then((user) => {\n        user.posts.push(post);\n      })\n      .then((user) => console.log(user));\n\n    update(userId, user).then(() =>\n      localStorage.setItem(\"data\", JSON.stringify(data))\n    );\n\n    resolve((data) => console.log(data));\n  });\n\nconst update = (id, user) =>\n  new Promise((resolve) => {\n    const data = JSON.parse(localStorage.getItem(\"data\"));\n    const userIndex = data.findIndex((u) => u.id === id);\n    data[userIndex] = { ...data[userIndex], ...user };\n    localStorage.setItem(\"users\", JSON.stringify(data));\n    resolve(data[userIndex]);\n  });\n\nexport default {\n  fetchAll,\n  getById,\n  update,\n  add,\n  clearLocalStorage,\n  addPost,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}