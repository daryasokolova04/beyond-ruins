{"ast":null,"code":"import axios from \"axios\";\nconst inMemoryJWTService = () => {\n  let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n  const refreshToken = () => {\n    const timeoutTrigger = 4 * 60 * 1000;\n    refreshTimeoutId = setInterval(() => {\n      axios.post(\"http://127.0.0.1:8000/api/v1/refresh/\", localStorage.getItem(\"refresh\")).then(response => {\n        setToken(response.data.access);\n        setAuthToken();\n      });\n    }, timeoutTrigger);\n  };\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n  const getToken = () => inMemoryJWT;\n  const setToken = token => {\n    inMemoryJWT = token;\n    setAuthToken();\n    refreshToken();\n  };\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    abortRefeshToken();\n  };\n  const setAuthToken = () => {\n    if (inMemoryJWT) {\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${inMemoryJWT}`;\n    } else delete axios.defaults.headers.common[\"Authorization\"];\n  };\n  return getToken, setToken, deleteToken;\n};\nexport default inMemoryJWTService();","map":{"version":3,"names":["axios","inMemoryJWTService","inMemoryJWT","refreshTimeoutId","refreshToken","timeoutTrigger","setInterval","post","localStorage","getItem","then","response","setToken","data","access","setAuthToken","abortRefeshToken","clearInterval","getToken","token","deleteToken","defaults","headers","common"],"sources":["/Users/darya/project/src/services/inMemoryJWT.js"],"sourcesContent":["import axios from \"axios\";\n\nconst inMemoryJWTService = () => {\n  let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n\n  const refreshToken = () => {\n    const timeoutTrigger = 4 * 60 * 1000;\n\n    refreshTimeoutId = setInterval(() => {\n      axios\n        .post(\n          \"http://127.0.0.1:8000/api/v1/refresh/\",\n          localStorage.getItem(\"refresh\")\n        )\n        .then((response) => {\n          setToken(response.data.access);\n          setAuthToken();\n        });\n    }, timeoutTrigger);\n  };\n\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n\n  const getToken = () => inMemoryJWT;\n\n  const setToken = (token) => {\n    inMemoryJWT = token;\n    setAuthToken();\n    refreshToken();\n  };\n\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    abortRefeshToken();\n  };\n\n  const setAuthToken = () => {\n    if (inMemoryJWT) {\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${inMemoryJWT}`;\n    } else delete axios.defaults.headers.common[\"Authorization\"];\n  };\n\n  return getToken, setToken, deleteToken;\n};\n\nexport default inMemoryJWTService();\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAC/B,IAAIC,WAAW,GAAG,IAAI;EACtB,IAAIC,gBAAgB,GAAG,IAAI;EAE3B,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;IAEpCF,gBAAgB,GAAGG,WAAW,CAAC,MAAM;MACnCN,KAAK,CACFO,IAAI,CACH,uCAAuC,EACvCC,YAAY,CAACC,OAAO,CAAC,SAAS,CAChC,CAAC,CACAC,IAAI,CAAEC,QAAQ,IAAK;QAClBC,QAAQ,CAACD,QAAQ,CAACE,IAAI,CAACC,MAAM,CAAC;QAC9BC,YAAY,CAAC,CAAC;MAChB,CAAC,CAAC;IACN,CAAC,EAAEV,cAAc,CAAC;EACpB,CAAC;EAED,MAAMW,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAIb,gBAAgB,EAAEc,aAAa,CAACd,gBAAgB,CAAC;EACvD,CAAC;EAED,MAAMe,QAAQ,GAAGA,CAAA,KAAMhB,WAAW;EAElC,MAAMU,QAAQ,GAAIO,KAAK,IAAK;IAC1BjB,WAAW,GAAGiB,KAAK;IACnBJ,YAAY,CAAC,CAAC;IACdX,YAAY,CAAC,CAAC;EAChB,CAAC;EAED,MAAMgB,WAAW,GAAGA,CAAA,KAAM;IACxBlB,WAAW,GAAG,IAAI;IAClBc,gBAAgB,CAAC,CAAC;EACpB,CAAC;EAED,MAAMD,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAIb,WAAW,EAAE;MACfF,KAAK,CAACqB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAI,UAASrB,WAAY,EAAC;IAC1E,CAAC,MAAM,OAAOF,KAAK,CAACqB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;EAC9D,CAAC;EAED,OAAOL,QAAQ,EAAEN,QAAQ,EAAEQ,WAAW;AACxC,CAAC;AAED,eAAenB,kBAAkB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}