{"ast":null,"code":"const data = [{\n  id: 1,\n  name: \"ivan\",\n  surname: \"ivanov\",\n  sex: \"Мужской\",\n  email: \"ivan.ivanov@mail.ru\",\n  password: \"123\",\n  license: true,\n  posts: []\n}, {\n  id: 123,\n  name: \"kate\",\n  surname: \"sidorova\",\n  sex: \"Женский\",\n  email: \"kate@kate.com\",\n  password: \"456\",\n  license: true,\n  posts: []\n}];\nif (!localStorage.getItem(\"data\")) {\n  localStorage.setItem(\"data\", JSON.stringify(data));\n}\nconst fetchAll = () => new Promise(resolve => {\n  window.setTimeout(function () {\n    resolve(JSON.parse(localStorage.getItem(\"data\")));\n  }, 0);\n});\nconst getById = id => new Promise(resolve => {\n  window.setTimeout(function () {\n    resolve(JSON.parse(localStorage.getItem(\"data\")).find(user => user.id === id));\n  }, 1000);\n});\nconst clearLocalStorage = () => {\n  localStorage.clear();\n};\nconst add = user => new Promise(resolve => {\n  const data = JSON.parse(localStorage.getItem(\"data\"));\n  data.push(user);\n  localStorage.setItem(\"data\", JSON.stringify(data));\n  resolve(data => console.log(data));\n});\nconst update = (id, user) => new Promise(resolve => {\n  const data = JSON.parse(localStorage.getItem(\"data\"));\n  const userIndex = data.findIndex(u => u.id === id);\n  data[userIndex] = {\n    ...data[userIndex],\n    ...user\n  };\n  localStorage.setItem(\"users\", JSON.stringify(data));\n  resolve(data[userIndex]);\n});\nexport default {\n  fetchAll,\n  getById,\n  update,\n  add,\n  clearLocalStorage\n};","map":{"version":3,"names":["data","id","name","surname","sex","email","password","license","posts","localStorage","getItem","setItem","JSON","stringify","fetchAll","Promise","resolve","window","setTimeout","parse","getById","find","user","clearLocalStorage","clear","add","push","console","log","update","userIndex","findIndex","u"],"sources":["/Users/darya/project/src/api/fake.api/users.api.js"],"sourcesContent":["const data = [\n  {\n    id: 1,\n    name: \"ivan\",\n    surname: \"ivanov\",\n    sex: \"Мужской\",\n    email: \"ivan.ivanov@mail.ru\",\n    password: \"123\",\n    license: true,\n    posts: [],\n  },\n  {\n    id: 123,\n    name: \"kate\",\n    surname: \"sidorova\",\n    sex: \"Женский\",\n    email: \"kate@kate.com\",\n    password: \"456\",\n    license: true,\n    posts: [],\n  },\n];\n\nif (!localStorage.getItem(\"data\")) {\n  localStorage.setItem(\"data\", JSON.stringify(data));\n}\n\nconst fetchAll = () =>\n  new Promise((resolve) => {\n    window.setTimeout(function () {\n      resolve(JSON.parse(localStorage.getItem(\"data\")));\n    }, 0);\n  });\n\nconst getById = (id) =>\n  new Promise((resolve) => {\n    window.setTimeout(function () {\n      resolve(\n        JSON.parse(localStorage.getItem(\"data\")).find((user) => user.id === id)\n      );\n    }, 1000);\n  });\n\nconst clearLocalStorage = () => {\n  localStorage.clear();\n};\n\nconst add = (user) =>\n  new Promise((resolve) => {\n    const data = JSON.parse(localStorage.getItem(\"data\"));\n    data.push(user);\n    localStorage.setItem(\"data\", JSON.stringify(data));\n    resolve((data) => console.log(data));\n  });\n\nconst update = (id, user) =>\n  new Promise((resolve) => {\n    const data = JSON.parse(localStorage.getItem(\"data\"));\n    const userIndex = data.findIndex((u) => u.id === id);\n    data[userIndex] = { ...data[userIndex], ...user };\n    localStorage.setItem(\"users\", JSON.stringify(data));\n    resolve(data[userIndex]);\n  });\n\nexport default {\n  fetchAll,\n  getById,\n  update,\n  add,\n  clearLocalStorage,\n};\n"],"mappings":"AAAA,MAAMA,IAAI,GAAG,CACX;EACEC,EAAE,EAAE,CAAC;EACLC,IAAI,EAAE,MAAM;EACZC,OAAO,EAAE,QAAQ;EACjBC,GAAG,EAAE,SAAS;EACdC,KAAK,EAAE,qBAAqB;EAC5BC,QAAQ,EAAE,KAAK;EACfC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE;AACT,CAAC,EACD;EACEP,EAAE,EAAE,GAAG;EACPC,IAAI,EAAE,MAAM;EACZC,OAAO,EAAE,UAAU;EACnBC,GAAG,EAAE,SAAS;EACdC,KAAK,EAAE,eAAe;EACtBC,QAAQ,EAAE,KAAK;EACfC,OAAO,EAAE,IAAI;EACbC,KAAK,EAAE;AACT,CAAC,CACF;AAED,IAAI,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAE;EACjCD,YAAY,CAACE,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,CAAC;AACpD;AAEA,MAAMc,QAAQ,GAAGA,CAAA,KACf,IAAIC,OAAO,CAAEC,OAAO,IAAK;EACvBC,MAAM,CAACC,UAAU,CAAC,YAAY;IAC5BF,OAAO,CAACJ,IAAI,CAACO,KAAK,CAACV,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;EACnD,CAAC,EAAE,CAAC,CAAC;AACP,CAAC,CAAC;AAEJ,MAAMU,OAAO,GAAInB,EAAE,IACjB,IAAIc,OAAO,CAAEC,OAAO,IAAK;EACvBC,MAAM,CAACC,UAAU,CAAC,YAAY;IAC5BF,OAAO,CACLJ,IAAI,CAACO,KAAK,CAACV,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACW,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACrB,EAAE,KAAKA,EAAE,CACxE,CAAC;EACH,CAAC,EAAE,IAAI,CAAC;AACV,CAAC,CAAC;AAEJ,MAAMsB,iBAAiB,GAAGA,CAAA,KAAM;EAC9Bd,YAAY,CAACe,KAAK,CAAC,CAAC;AACtB,CAAC;AAED,MAAMC,GAAG,GAAIH,IAAI,IACf,IAAIP,OAAO,CAAEC,OAAO,IAAK;EACvB,MAAMhB,IAAI,GAAGY,IAAI,CAACO,KAAK,CAACV,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrDV,IAAI,CAAC0B,IAAI,CAACJ,IAAI,CAAC;EACfb,YAAY,CAACE,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,CAAC;EAClDgB,OAAO,CAAEhB,IAAI,IAAK2B,OAAO,CAACC,GAAG,CAAC5B,IAAI,CAAC,CAAC;AACtC,CAAC,CAAC;AAEJ,MAAM6B,MAAM,GAAGA,CAAC5B,EAAE,EAAEqB,IAAI,KACtB,IAAIP,OAAO,CAAEC,OAAO,IAAK;EACvB,MAAMhB,IAAI,GAAGY,IAAI,CAACO,KAAK,CAACV,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,MAAMoB,SAAS,GAAG9B,IAAI,CAAC+B,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAAC/B,EAAE,KAAKA,EAAE,CAAC;EACpDD,IAAI,CAAC8B,SAAS,CAAC,GAAG;IAAE,GAAG9B,IAAI,CAAC8B,SAAS,CAAC;IAAE,GAAGR;EAAK,CAAC;EACjDb,YAAY,CAACE,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,CAAC;EACnDgB,OAAO,CAAChB,IAAI,CAAC8B,SAAS,CAAC,CAAC;AAC1B,CAAC,CAAC;AAEJ,eAAe;EACbhB,QAAQ;EACRM,OAAO;EACPS,MAAM;EACNJ,GAAG;EACHF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}