{"ast":null,"code":"import axios from \"axios\";\nlet intervalId = null;\nconst refresh = refreshToken => {\n  intervalId = setInterval(() => {\n    axios.post(\"http://127.0.0.1:8000/api/v1/refresh/\", {\n      refresh: refreshToken\n    }, {\n      dataType: \"json\",\n      contentType: \"application/json\"\n    }).then(response => {\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${response.data.access}`;\n      localStorage.setItem(\"access\", response.data.access);\n      console.log(axios.defaults.headers.common);\n    }).catch(err => console.log(err));\n  }, 1000 * 60 * 3);\n};\nexport const refreshToken = () => {\n  const accessToken = localStorage.getItem(\"access\");\n  const refreshToken = localStorage.getItem(\"refresh\");\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\n  return refresh(refreshToken);\n};\nexport const abortRefeshToken = () => {\n  if (intervalId) clearInterval(intervalId);\n  delete axios.defaults.headers.common[\"Authorization\"];\n};","map":{"version":3,"names":["axios","intervalId","refresh","refreshToken","setInterval","post","dataType","contentType","then","response","defaults","headers","common","data","access","localStorage","setItem","console","log","catch","err","accessToken","getItem","abortRefeshToken","clearInterval"],"sources":["/Users/darya/project/src/services/refresh.jsx"],"sourcesContent":["import axios from \"axios\";\n\nlet intervalId = null;\n\nconst refresh = (refreshToken) => {\n  intervalId = setInterval(() => {\n    axios\n      .post(\n        \"http://127.0.0.1:8000/api/v1/refresh/\",\n        { refresh: refreshToken },\n        {\n          dataType: \"json\",\n          contentType: \"application/json\",\n        }\n      )\n      .then((response) => {\n        axios.defaults.headers.common[\n          \"Authorization\"\n        ] = `Bearer ${response.data.access}`;\n        localStorage.setItem(\"access\", response.data.access);\n        console.log(axios.defaults.headers.common);\n      })\n      .catch((err) => console.log(err));\n  }, 1000 * 60 * 3);\n};\n\nexport const refreshToken = () => {\n  const accessToken = localStorage.getItem(\"access\");\n  const refreshToken = localStorage.getItem(\"refresh\");\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\n  return refresh(refreshToken);\n};\n\nexport const abortRefeshToken = () => {\n  if (intervalId) clearInterval(intervalId);\n  delete axios.defaults.headers.common[\"Authorization\"];\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,IAAIC,UAAU,GAAG,IAAI;AAErB,MAAMC,OAAO,GAAIC,YAAY,IAAK;EAChCF,UAAU,GAAGG,WAAW,CAAC,MAAM;IAC7BJ,KAAK,CACFK,IAAI,CACH,uCAAuC,EACvC;MAAEH,OAAO,EAAEC;IAAa,CAAC,EACzB;MACEG,QAAQ,EAAE,MAAM;MAChBC,WAAW,EAAE;IACf,CACF,CAAC,CACAC,IAAI,CAAEC,QAAQ,IAAK;MAClBT,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAC3B,eAAe,CAChB,GAAI,UAASH,QAAQ,CAACI,IAAI,CAACC,MAAO,EAAC;MACpCC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEP,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAC;MACpDG,OAAO,CAACC,GAAG,CAAClB,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC;IAC5C,CAAC,CAAC,CACDO,KAAK,CAAEC,GAAG,IAAKH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC,CAAC;EACrC,CAAC,EAAE,IAAI,GAAG,EAAE,GAAG,CAAC,CAAC;AACnB,CAAC;AAED,OAAO,MAAMjB,YAAY,GAAGA,CAAA,KAAM;EAChC,MAAMkB,WAAW,GAAGN,YAAY,CAACO,OAAO,CAAC,QAAQ,CAAC;EAClD,MAAMnB,YAAY,GAAGY,YAAY,CAACO,OAAO,CAAC,SAAS,CAAC;EACpDtB,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAI,UAASS,WAAY,EAAC;EACxE,OAAOnB,OAAO,CAACC,YAAY,CAAC;AAC9B,CAAC;AAED,OAAO,MAAMoB,gBAAgB,GAAGA,CAAA,KAAM;EACpC,IAAItB,UAAU,EAAEuB,aAAa,CAACvB,UAAU,CAAC;EACzC,OAAOD,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;AACvD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}