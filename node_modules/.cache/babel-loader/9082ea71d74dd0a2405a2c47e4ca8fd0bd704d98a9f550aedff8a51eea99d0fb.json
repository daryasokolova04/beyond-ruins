{"ast":null,"code":"import axios from \"axios\";\nexport const refreshToken = () => {\n  let refreshTimeoutId = null;\n  let refreshToken = localStorage.getItem(\"refresh\");\n  //   console.log(refreshToken);\n\n  setInterval(() => {\n    // console.log(refreshToken);\n    axios.post(\"http://127.0.0.1:8000/api/v1/refresh/\", {\n      refresh: refreshToken\n    }, {\n      dataType: \"json\",\n      contentType: \"application/json\"\n    }).then(response => {\n      console.log(response);\n      localStorage.removeItem(\"access\");\n      localStorage.setItem(\"access\", response[access]);\n    }).catch(err => console.log(err));\n  }, 10000);\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n};\n\n//   const timeoutTrigger = 4 * 60 * 1000;\n//   let refreshTimeoutId;\n\n//   refreshTimeoutId = setInterval(() => {\n//     axios\n//       .post(\n//         \"http://127.0.0.1:8000/api/v1/refresh/\",\n//         localStorage.getItem(\"refresh\")\n//       )\n//       .then((response) => {\n//         //   setToken(response.data.access);\n//         localStorage.removeItem(\"access\");\n//         localStorage.setItem(\"access\", response.data.access);\n//       });\n//   }, timeoutTrigger);\n// };","map":{"version":3,"names":["axios","refreshToken","refreshTimeoutId","localStorage","getItem","setInterval","post","refresh","dataType","contentType","then","response","console","log","removeItem","setItem","access","catch","err","abortRefeshToken","clearInterval"],"sources":["/Users/darya/project/src/services/refresh.jsx"],"sourcesContent":["import axios from \"axios\";\n\nexport const refreshToken = () => {\n  let refreshTimeoutId = null;\n  let refreshToken = localStorage.getItem(\"refresh\");\n  //   console.log(refreshToken);\n\n  setInterval(() => {\n    // console.log(refreshToken);\n    axios\n      .post(\n        \"http://127.0.0.1:8000/api/v1/refresh/\",\n        { refresh: refreshToken },\n        {\n          dataType: \"json\",\n          contentType: \"application/json\",\n        }\n      )\n      .then((response) => {\n        console.log(response);\n        localStorage.removeItem(\"access\");\n        localStorage.setItem(\"access\", response[access]);\n      })\n      .catch((err) => console.log(err));\n  }, 10000);\n\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n};\n\n//   const timeoutTrigger = 4 * 60 * 1000;\n//   let refreshTimeoutId;\n\n//   refreshTimeoutId = setInterval(() => {\n//     axios\n//       .post(\n//         \"http://127.0.0.1:8000/api/v1/refresh/\",\n//         localStorage.getItem(\"refresh\")\n//       )\n//       .then((response) => {\n//         //   setToken(response.data.access);\n//         localStorage.removeItem(\"access\");\n//         localStorage.setItem(\"access\", response.data.access);\n//       });\n//   }, timeoutTrigger);\n// };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAChC,IAAIC,gBAAgB,GAAG,IAAI;EAC3B,IAAID,YAAY,GAAGE,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;EAClD;;EAEAC,WAAW,CAAC,MAAM;IAChB;IACAL,KAAK,CACFM,IAAI,CACH,uCAAuC,EACvC;MAAEC,OAAO,EAAEN;IAAa,CAAC,EACzB;MACEO,QAAQ,EAAE,MAAM;MAChBC,WAAW,EAAE;IACf,CACF,CAAC,CACAC,IAAI,CAAEC,QAAQ,IAAK;MAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrBR,YAAY,CAACW,UAAU,CAAC,QAAQ,CAAC;MACjCX,YAAY,CAACY,OAAO,CAAC,QAAQ,EAAEJ,QAAQ,CAACK,MAAM,CAAC,CAAC;IAClD,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAKN,OAAO,CAACC,GAAG,CAACK,GAAG,CAAC,CAAC;EACrC,CAAC,EAAE,KAAK,CAAC;EAET,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAIjB,gBAAgB,EAAEkB,aAAa,CAAClB,gBAAgB,CAAC;EACvD,CAAC;AACH,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}