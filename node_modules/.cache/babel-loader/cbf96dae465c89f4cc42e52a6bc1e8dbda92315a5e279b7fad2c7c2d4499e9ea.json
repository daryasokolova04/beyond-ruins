{"ast":null,"code":"import axios from \"axios\";\nimport { setAuthToken } from \"../components/setAuthToken\";\nconst inMemoryJWTService = () => {\n  //   let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n  const refreshToken = () => {\n    const timeoutTrigger = 4 * 60 * 1000;\n    refreshTimeoutId = setInterval(() => {\n      axios.post(\"http://127.0.0.1:8000/api/v1/refresh/\", localStorage.refresh).then(response => {\n        //   setToken(response.data.access);\n        localStorage.removeItem(\"access\");\n        localStorage.setItem(\"access\", response.data.access);\n      });\n    }, timeoutTrigger);\n  };\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n  const getToken = () => {\n    return inMemoryJWT;\n  };\n  const setToken = () => {\n    inMemoryJWT = token;\n  };\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    localStorage.removeItem(\"id\");\n    localStorage.removeItem(\"refresh\");\n    abortRefeshToken();\n  };\n  return getToken, setToken, deleteToken;\n};\nexport default inMemoryJWTService;","map":{"version":3,"names":["axios","setAuthToken","inMemoryJWTService","refreshTimeoutId","refreshToken","timeoutTrigger","setInterval","post","localStorage","refresh","then","response","removeItem","setItem","data","access","abortRefeshToken","clearInterval","getToken","inMemoryJWT","setToken","token","deleteToken"],"sources":["/Users/darya/project/src/services/inMemoryJWT.js"],"sourcesContent":["import axios from \"axios\";\nimport { setAuthToken } from \"../components/setAuthToken\";\n\nconst inMemoryJWTService = () => {\n  //   let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n\n  const refreshToken = () => {\n    const timeoutTrigger = 4 * 60 * 1000;\n\n    refreshTimeoutId = setInterval(() => {\n      axios\n        .post(\"http://127.0.0.1:8000/api/v1/refresh/\", localStorage.refresh)\n        .then((response) => {\n          //   setToken(response.data.access);\n          localStorage.removeItem(\"access\");\n          localStorage.setItem(\"access\", response.data.access);\n        });\n    }, timeoutTrigger);\n  };\n\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n\n  const getToken = () => {\n    return inMemoryJWT;\n  };\n\n  const setToken = () => {\n    inMemoryJWT = token;\n  };\n\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    localStorage.removeItem(\"id\");\n    localStorage.removeItem(\"refresh\");\n    abortRefeshToken();\n  };\n\n  return getToken, setToken, deleteToken;\n};\nexport default inMemoryJWTService;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,4BAA4B;AAEzD,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAC/B;EACA,IAAIC,gBAAgB,GAAG,IAAI;EAE3B,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;IAEpCF,gBAAgB,GAAGG,WAAW,CAAC,MAAM;MACnCN,KAAK,CACFO,IAAI,CAAC,uCAAuC,EAAEC,YAAY,CAACC,OAAO,CAAC,CACnEC,IAAI,CAAEC,QAAQ,IAAK;QAClB;QACAH,YAAY,CAACI,UAAU,CAAC,QAAQ,CAAC;QACjCJ,YAAY,CAACK,OAAO,CAAC,QAAQ,EAAEF,QAAQ,CAACG,IAAI,CAACC,MAAM,CAAC;MACtD,CAAC,CAAC;IACN,CAAC,EAAEV,cAAc,CAAC;EACpB,CAAC;EAED,MAAMW,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAIb,gBAAgB,EAAEc,aAAa,CAACd,gBAAgB,CAAC;EACvD,CAAC;EAED,MAAMe,QAAQ,GAAGA,CAAA,KAAM;IACrB,OAAOC,WAAW;EACpB,CAAC;EAED,MAAMC,QAAQ,GAAGA,CAAA,KAAM;IACrBD,WAAW,GAAGE,KAAK;EACrB,CAAC;EAED,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxBH,WAAW,GAAG,IAAI;IAClBX,YAAY,CAACI,UAAU,CAAC,IAAI,CAAC;IAC7BJ,YAAY,CAACI,UAAU,CAAC,SAAS,CAAC;IAClCI,gBAAgB,CAAC,CAAC;EACpB,CAAC;EAED,OAAOE,QAAQ,EAAEE,QAAQ,EAAEE,WAAW;AACxC,CAAC;AACD,eAAepB,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}