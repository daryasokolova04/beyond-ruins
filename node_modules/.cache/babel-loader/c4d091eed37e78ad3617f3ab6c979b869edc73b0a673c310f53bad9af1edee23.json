{"ast":null,"code":"import axios from \"axios\";\nconst inMemoryJWTService = () => {\n  let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n  let rfrToken = null;\n  console.log(rfrToken);\n  const refreshToken = rfrToken => {\n    const timeoutTrigger = 5 * 60 * 1000 - 10000;\n    refreshTimeoutId = setInterval(() => {\n      axios.post(\"http://127.0.0.1:8000/api/v1/refresh/\", rfrToken).then(response => setToken(response.data.access));\n    }, timeoutTrigger);\n  };\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n  const getToken = () => inMemoryJWT;\n  const getRefreshToken = () => rfrToken;\n  const setRefreshToken = token => {\n    console.log(token);\n    rfrToken = token;\n    refreshToken(rfrToken);\n  };\n  const setToken = token => {\n    inMemoryJWT = token;\n    // refreshToken(rfrToken);\n  };\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    abortRefeshToken();\n  };\n  return getToken, setToken, deleteToken, setRefreshToken, getRefreshToken;\n};\nexport default inMemoryJWTService();","map":{"version":3,"names":["axios","inMemoryJWTService","inMemoryJWT","refreshTimeoutId","rfrToken","console","log","refreshToken","timeoutTrigger","setInterval","post","then","response","setToken","data","access","abortRefeshToken","clearInterval","getToken","getRefreshToken","setRefreshToken","token","deleteToken"],"sources":["/Users/darya/project/src/services/inMemoryJWT.js"],"sourcesContent":["import axios from \"axios\";\n\nconst inMemoryJWTService = () => {\n  let inMemoryJWT = null;\n  let refreshTimeoutId = null;\n  let rfrToken = null;\n\n  console.log(rfrToken);\n\n  const refreshToken = (rfrToken) => {\n    const timeoutTrigger = 5 * 60 * 1000 - 10000;\n\n    refreshTimeoutId = setInterval(() => {\n      axios\n        .post(\"http://127.0.0.1:8000/api/v1/refresh/\", rfrToken)\n        .then((response) => setToken(response.data.access));\n    }, timeoutTrigger);\n  };\n\n  const abortRefeshToken = () => {\n    if (refreshTimeoutId) clearInterval(refreshTimeoutId);\n  };\n\n  const getToken = () => inMemoryJWT;\n\n  const getRefreshToken = () => rfrToken;\n\n  const setRefreshToken = (token) => {\n    console.log(token);\n    rfrToken = token;\n    refreshToken(rfrToken);\n  };\n\n  const setToken = (token) => {\n    inMemoryJWT = token;\n    // refreshToken(rfrToken);\n  };\n\n  const deleteToken = () => {\n    inMemoryJWT = null;\n    abortRefeshToken();\n  };\n\n  return getToken, setToken, deleteToken, setRefreshToken, getRefreshToken;\n};\n\nexport default inMemoryJWTService();\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAC/B,IAAIC,WAAW,GAAG,IAAI;EACtB,IAAIC,gBAAgB,GAAG,IAAI;EAC3B,IAAIC,QAAQ,GAAG,IAAI;EAEnBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;EAErB,MAAMG,YAAY,GAAIH,QAAQ,IAAK;IACjC,MAAMI,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,GAAG,KAAK;IAE5CL,gBAAgB,GAAGM,WAAW,CAAC,MAAM;MACnCT,KAAK,CACFU,IAAI,CAAC,uCAAuC,EAAEN,QAAQ,CAAC,CACvDO,IAAI,CAAEC,QAAQ,IAAKC,QAAQ,CAACD,QAAQ,CAACE,IAAI,CAACC,MAAM,CAAC,CAAC;IACvD,CAAC,EAAEP,cAAc,CAAC;EACpB,CAAC;EAED,MAAMQ,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAIb,gBAAgB,EAAEc,aAAa,CAACd,gBAAgB,CAAC;EACvD,CAAC;EAED,MAAMe,QAAQ,GAAGA,CAAA,KAAMhB,WAAW;EAElC,MAAMiB,eAAe,GAAGA,CAAA,KAAMf,QAAQ;EAEtC,MAAMgB,eAAe,GAAIC,KAAK,IAAK;IACjChB,OAAO,CAACC,GAAG,CAACe,KAAK,CAAC;IAClBjB,QAAQ,GAAGiB,KAAK;IAChBd,YAAY,CAACH,QAAQ,CAAC;EACxB,CAAC;EAED,MAAMS,QAAQ,GAAIQ,KAAK,IAAK;IAC1BnB,WAAW,GAAGmB,KAAK;IACnB;EACF,CAAC;EAED,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxBpB,WAAW,GAAG,IAAI;IAClBc,gBAAgB,CAAC,CAAC;EACpB,CAAC;EAED,OAAOE,QAAQ,EAAEL,QAAQ,EAAES,WAAW,EAAEF,eAAe,EAAED,eAAe;AAC1E,CAAC;AAED,eAAelB,kBAAkB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}